<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>무한섬 팀 배정 시스템 | 메인</title>
    <link rel="stylesheet" href="main_hub.css">
</head>
<body>

    <div class="main-hub-container">
    
        <a href="login.html" class="admin-login-button" id="auth-status-button">🔑 관리자 로그인</a>

        <header class="hub-header">
            <div class="logo-area">
                <img src="무한섬_로고.png" alt="무한섬 로고" class="main-logo">
                <h1>무한섬</h1>
            </div>
            <p class="description">
                팀 구성 및 점수 관리 시스템.
                <br>선수 티어표 및 출퇴근 관리 시스템.
            </p>
        </header>

        <main class="card-grid">
            <a href="draft.html" class="feature-card draft-card">
                <div class="card-icon">🎲</div>
                <h2>팀 배정 시작</h2>
                <p>선수 드래프트 및 팀 구성 현황 관리</p>
            </a>
            <a href="attend.html" class="feature-card attend-card">
                <div class="card-icon">✅</div>
                <h2>출석 관리</h2>
                <p>참석/불참 선수 상태 확인 및 변경</p>
            </a>
            <a href="tier.html" class="feature-card tier-card">
                <div class="card-icon">⚙️</div>
                <h2>선수 티어 설정</h2>
                <p>선수 코스트 및 티어 정보 관리</p>
            </a>
            <a href="score.html" class="feature-card score-card">
                <div class="card-icon">🏆</div>
                <h2>점수 계산</h2>
                <p>라운드 점수 입력 및 최종 순위 결정</p>
            </a>
        </main>

        <footer class="hub-footer">
            <p>&copy; 2025 무한섬. All tools run locally (Browser Storage).</p>
        </footer>
    </div>
    
    <script>
        // login.js와 동일한 토큰 키
        const AUTH_TOKEN_KEY = 'authToken'; 

        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. 로그인 상태 확인 및 버튼 변경 로직 ---
            const authButton = document.getElementById('auth-status-button');
            if (!authButton) {
                 console.warn("auth-status-button을 찾을 수 없습니다.");
                 return; // 버튼 없으면 종료
            }
            
            const currentToken = sessionStorage.getItem(AUTH_TOKEN_KEY);

            if (currentToken) {
                // 로그인 상태일 때
                authButton.textContent = '🔓 로그아웃';
                authButton.href = "#"; // 링크 이동 방지
                authButton.classList.add('logout'); // CSS 스타일 적용용
                
                authButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (confirm('로그아웃 하시겠습니까?')) {
                        sessionStorage.removeItem(AUTH_TOKEN_KEY); // 토큰 삭제
                        alert('로그아웃 되었습니다.');
                        window.location.reload(); // 페이지 새로고침
                    }
                });
            } else {
                // 로그아웃 상태일 때 (기본 HTML과 동일)
                authButton.textContent = '🔑 관리자 로그인';
                authButton.href = "login.html";
                authButton.classList.remove('logout');
            }
            
            // --- 2.  메인 컨텐츠가 항상 보이도록 강제 ---
            // (이전 스플래시 코드의 잔재(opacity:0)를 무시)
            const mainContent = document.querySelector('.main-hub-container');
            if (mainContent) {
                mainContent.style.opacity = '1';
                mainContent.style.display = 'block';
            }
        });
    </script>
</body>

</html>
